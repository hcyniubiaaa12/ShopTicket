<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.shop.mapper.TicketMapper">

    <resultMap id="BaseResultMap" type="com.shop.entity.Ticket">
            <id property="id" column="id" />
            <result property="performanceId" column="performance_id" />
            <result property="ticketTypeId" column="ticket_type_id" />
            <result property="stock" column="stock" />
            <result property="status" column="status" />
            <result property="isDeleted" column="is_deleted" />
    </resultMap>


    <select id="getAllTicketById" resultType="com.shop.dto.TicketDto">
        -- 根据 performance_id 查询票价
        SELECT
            t.id,
            tt.name ,
            pr.price,
            t.stock

        FROM ticket t
                 JOIN ticket_type tt ON tt.id = t.ticket_type_id
                 JOIN price pr ON pr.id = tt.price_id
        WHERE t.performance_id = #{id}
        ORDER BY pr.price;


    </select>
</mapper>
